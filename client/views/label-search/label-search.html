<form class="form">
  <input autofocus class="form-control input-lg col-md-6" ng-model="vm.search.fulltext"
         placeholder="Search fulltext drug labels...">
  <button class="btn btn-primary btn-lg" ng-click="vm.newSearch()">Search</button>
</form>


<div class="row">

  <div class="col-md-4">

    <h3 ng-if="vm.selectedFacets.length">Selected Facets</h3>


    <div ng-repeat="facet in vm.selectedFacets">
      {{facet.label}}:

      <a ng-click="vm.toggleFacet(facet.fieldName, facet.value)">
        <span class="label label-primary">
          {{facet.value}}
        <span style="color:red" class="glyphicon glyphicon-remove"></span>
        </span>
      </a>
    </div>


    <h3>Available Facets</h3>


    <div>
      Sort alphabetically <input type="checkbox" ng-model="isAlpha">
    </div>


    <div ng-repeat="(facetKey, facet) in vm.facets">
      <div ng-if="facet.data.length">
        <h4>{{facet.label}}</h4>

        <ul class="list-group" style="max-height: 200px; overflow-y: scroll">
          <a class="list-group-item"
             ng-repeat="facetInstance in facet.data | orderBy : (isAlpha ? 'term' : 'count') : !isAlpha"
             ng-click="vm.toggleFacet(facetKey, facetInstance.term)">
            <span class="badge">{{facetInstance.count | number}}</span>
            {{facetInstance.term}}
          </a>
        </ul>
      </div>
    </div>

  </div>
  <div class="col-md-8">
    <div>

      Total Results: {{vm.resp.data.meta.results.total | number}}

    </div>

    <pagination
      boundary-links="true" class="pagination-sm" max-size="10"
      total-items="vm.resp.data.meta.results.total" items-per-age="vm.query.pageSize" ng-model="vm.query.pageNum"
      ng-change="vm.executeQuery()"></pagination>


    <ul class="list-group">
      <a class="list-group-item" href="/label/{{row.openfda.spl_id[0]}}" class="list-group-item"
         ng-repeat="row in vm.resp.data.results">
        <p>Brand Name: {{row.openfda.brand_name[0]}} ({{row.openfda.manufacturer_name[0]}})</p>

        <p>Generic Name: {{row.openfda.generic_name[0]}}</p>

        <p>
          Ingredients:
          <span class="label label-default" ng-repeat="i in row.openfda.substance_name">
            {{i}}
          </span>
        </p>

        <p>

        </p>

      </a>
    </ul>

    <pagination
      boundary-links="true" class="pagination-sm" max-size="10"
      total-items="vm.resp.data.meta.results.total" items-per-age="vm.query.pageSize" ng-model="vm.query.pageNum"
      ng-change="vm.executeQuery()"></pagination>


  </div>


</div>


<button class="btn btn-default" ng-click="jsonHidden = !jsonHidden">Show raw JSON</button>
<div collapse="!jsonHidden">
      <pre>
  {{vm.respText}}
      </pre>
</div>


