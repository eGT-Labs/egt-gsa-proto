<h1>Substance: {{vm.name}}</h1>

<a href="/label-search?facet.substance_name={{vm.name}}">Drugs Containing {{vm.name}}</a>

<div class="row">
  <div class="col-md-6 col-md-push-3" ng-if="vm.adverseEvents">
    <h3>{{vm.adverseEvents.drugEventCount | number}} Adverse Events
    </h3>

    <table class="table table-condensed">
      <thead>
      <tr>
        <th>
        </th>
        <th>
          <a ng-click="vm.sortBy = 'term'; vm.sort()">
            Symptom
          </a>
        </th>
        <th>
          <a ng-click="vm.sortBy = 'reportingRatio'; vm.sort()">
            Proportional Reporting Ratio
            <a href="https://en.wikipedia.org/wiki/Proportional_reporting_ratio" target="_blank">
              <span class="glyphicon glyphicon-info-sign"></span>
            </a>
          </a>
        </th>
        <th>
          <a ng-click="vm.sortBy = 'freqThisDrug'; vm.sort()">
            Instances
          </a>
        </th>

      </tr>
      </thead>
      <tr ng-repeat="row in vm.adverseEvents.symptoms">
        <td>
          <a href="https://duckduckgo.com/?q=%22{{row.term}}%22" target="_blank">
            <span class="glyphicon glyphicon-info-sign"></span>
          </a>
        </td>
        <td>{{row.term}}</td>
        <td>{{row.reportingRatio | number }} x</td>
        <td>
          {{row.count | number}}

          <em>({{(100 * row.freqThisDrug) | number : 2 }}%)</em>
        </td>
      </tr>
    </table>

  </div>
</div>

